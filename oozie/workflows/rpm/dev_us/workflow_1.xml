<workflow-app name="sqoop-wf" xmlns="uri:oozie:workflow:0.2"><start to="sqoop-node0" /><action name="sqoop-node0"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/account_snapshots" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>account_snapshots</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.account_snapshots_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="sqoop-node1" /><error to="failEmail" /></action><action name="sqoop-node1"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/aim_images" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>aim_images</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.aim_images_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="sqoop-node2" /><error to="failEmail" /></action><action name="sqoop-node2"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/aim_vehicles" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>aim_vehicles</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.aim_vehicles_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="sqoop-node3" /><error to="failEmail" /></action><action name="sqoop-node3"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/background_jobs" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>background_jobs</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.background_jobs_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="sqoop-node4" /><error to="failEmail" /></action><action name="sqoop-node4"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/corporate_user_permissions" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>corporate_user_permissions</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.corporate_user_permissions_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="sqoop-node5" /><error to="failEmail" /></action><action name="sqoop-node5"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/fee_charges" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>fee_charges</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.fee_charges_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="sqoop-node6" /><error to="failEmail" /></action><action name="sqoop-node6"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/inspection_details" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>inspection_details</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.inspection_details_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="sqoop-node7" /><error to="failEmail" /></action><action name="sqoop-node7"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/nissan_rental_car_references" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>nissan_rental_car_references</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.nissan_rental_car_references_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="sqoop-node8" /><error to="failEmail" /></action><action name="sqoop-node8"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/undo_reports" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>undo_reports</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.undo_reports_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="sqoop-node9" /><error to="failEmail" /></action><action name="sqoop-node9"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/user_permissions_audits" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>user_permissions_audits</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.user_permissions_audits_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="sqoop-node10" /><error to="failEmail" /></action><action name="sqoop-node10"><sqoop xmlns="uri:oozie:sqoop-action:0.2"><job-tracker>${jobTracker}</job-tracker><name-node>${nameNode}</name-node><prepare><delete path="/data/database/rpm/worklists" /></prepare><configuration><property><name>mapred.job.queue.name</name><value>${queueName}</value></property><property><name>oozie.hive.defaults</name><value>/tmp/oozie-hive-site.xml</value></property></configuration><arg>import</arg><arg>--connect</arg><arg>${jdbcUrl}</arg><arg>--username</arg><arg>${sqlUser}</arg><arg>--password</arg><arg>${sqlPass}</arg><arg>--table</arg><arg>worklists</arg><arg>--warehouse-dir=/data/database/rpm/</arg><arg>-m</arg><arg>1
</arg><arg>--hive-import</arg><arg>--hive-overwrite</arg><arg>--hive-table</arg><arg>rpm.worklists_stg</arg><file>/tmp/hive-site.xml#hive-site.xml</file></sqoop><ok to="end" /><error to="failEmail" /></action><action name="failEmail"><email xmlns="uri:oozie:email-action:0.1"><to>${alertEmail}</to><subject>oozie job failure</subject><body>The workflow ${wf:id()} name ${wf:name()} path ${wf:appPath()} had issues and was killed.  The error message is: ${wf:errorMessage(wf:lastErrorNode())}</body></email><ok to="fail" /><error to="fail" /></action><kill name="fail"><message>Sqoop failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message></kill><end name="end" /></workflow-app>